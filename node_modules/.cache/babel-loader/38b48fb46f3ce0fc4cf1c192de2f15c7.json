{"ast":null,"code":"import _objectSpread from\"C:\\\\webgis\\\\newfold\\\\dapp-project\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"C:\\\\webgis\\\\newfold\\\\dapp-project\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\webgis\\\\newfold\\\\dapp-project\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\webgis\\\\newfold\\\\dapp-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useMoralis}from\"react-moralis\";import{getEllipsisTxt}from\"helpers/formatters\";import Blockie from\"../Blockie\";import{Button,Card,Modal}from\"antd\";import{useState}from\"react\";import Address from\"../Address/Address\";import{SelectOutlined}from\"@ant-design/icons\";import{getExplorer}from\"helpers/networks\";import Text from\"antd/lib/typography/Text\";import{connectors}from\"./config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var styles={account:{height:\"42px\",padding:\"0 15px\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",width:\"fit-content\",borderRadius:\"12px\",backgroundColor:\"rgb(244, 244, 244)\",cursor:\"pointer\"},text:{color:\"#21BF96\"},connector:{alignItems:\"center\",display:\"flex\",flexDirection:\"column\",height:\"auto\",justifyContent:\"center\",marginLeft:\"auto\",marginRight:\"auto\",padding:\"20px 5px\",cursor:\"pointer\"},icon:{alignSelf:\"center\",fill:\"rgb(40, 13, 95)\",flexShrink:\"0\",marginBottom:\"8px\",height:\"30px\"}};function Account(){var _useMoralis=useMoralis(),authenticate=_useMoralis.authenticate,isAuthenticated=_useMoralis.isAuthenticated,account=_useMoralis.account,chainId=_useMoralis.chainId,logout=_useMoralis.logout;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setIsModalVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAuthModalVisible=_useState4[0],setIsAuthModalVisible=_useState4[1];if(!isAuthenticated||!account){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setIsAuthModalVisible(true);},children:/*#__PURE__*/_jsx(\"p\",{style:styles.text,children:\"Authenticate\"})}),/*#__PURE__*/_jsxs(Modal,{visible:isAuthModalVisible,footer:null,onCancel:function onCancel(){return setIsAuthModalVisible(false);},bodyStyle:{padding:\"15px\",fontSize:\"17px\",fontWeight:\"500\"},style:{fontSize:\"16px\",fontWeight:\"500\"},width:\"340px\",children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:\"10px\",display:\"flex\",justifyContent:\"center\",fontWeight:\"700\",fontSize:\"20px\"},children:\"Connect Wallet\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\"},children:connectors.map(function(_ref,key){var title=_ref.title,icon=_ref.icon,connectorId=_ref.connectorId;return/*#__PURE__*/_jsxs(\"div\",{style:styles.connector,onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authenticate({provider:connectorId});case 3:window.localStorage.setItem(\"connectorId\",connectorId);setIsAuthModalVisible(false);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),children:[/*#__PURE__*/_jsx(\"img\",{src:icon,alt:title,style:styles.icon}),/*#__PURE__*/_jsx(Text,{style:{fontSize:\"14px\"},children:title})]},key);})})]})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.account,onClick:function onClick(){return setIsModalVisible(true);},children:[/*#__PURE__*/_jsx(\"p\",{style:_objectSpread({marginRight:\"5px\"},styles.text),children:getEllipsisTxt(account,6)}),/*#__PURE__*/_jsx(Blockie,{currentWallet:true,scale:3})]}),/*#__PURE__*/_jsxs(Modal,{visible:isModalVisible,footer:null,onCancel:function onCancel(){return setIsModalVisible(false);},bodyStyle:{padding:\"15px\",fontSize:\"17px\",fontWeight:\"500\"},style:{fontSize:\"16px\",fontWeight:\"500\"},width:\"400px\",children:[\"Account\",/*#__PURE__*/_jsxs(Card,{style:{marginTop:\"10px\",borderRadius:\"1rem\"},bodyStyle:{padding:\"15px\"},children:[/*#__PURE__*/_jsx(Address,{avatar:\"left\",size:6,copyable:true,style:{fontSize:\"20px\"}}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"10px\",padding:\"0 10px\"},children:/*#__PURE__*/_jsxs(\"a\",{href:\"\".concat(getExplorer(chainId),\"/address/\").concat(account),target:\"_blank\",rel:\"noreferrer\",children:[/*#__PURE__*/_jsx(SelectOutlined,{style:{marginRight:\"5px\"}}),\"View on Explorer\"]})})]}),/*#__PURE__*/_jsx(Button,{size:\"large\",type:\"primary\",style:{width:\"100%\",marginTop:\"10px\",borderRadius:\"0.5rem\",fontSize:\"16px\",fontWeight:\"500\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return logout();case 2:window.localStorage.removeItem(\"connectorId\");setIsModalVisible(false);case 4:case\"end\":return _context2.stop();}}},_callee2);})),children:\"Disconnect Wallet\"})]})]});}export default Account;","map":{"version":3,"sources":["C:/webgis/newfold/dapp-project/src/components/Account/Account.jsx"],"names":["useMoralis","getEllipsisTxt","Blockie","Button","Card","Modal","useState","Address","SelectOutlined","getExplorer","Text","connectors","styles","account","height","padding","display","justifyContent","alignItems","width","borderRadius","backgroundColor","cursor","text","color","connector","flexDirection","marginLeft","marginRight","icon","alignSelf","fill","flexShrink","marginBottom","Account","authenticate","isAuthenticated","chainId","logout","isModalVisible","setIsModalVisible","isAuthModalVisible","setIsAuthModalVisible","fontSize","fontWeight","gridTemplateColumns","map","key","title","connectorId","provider","window","localStorage","setItem","console","error","marginTop","removeItem"],"mappings":"qfAAA,OAASA,UAAT,KAA2B,eAA3B,CACA,OAASC,cAAT,KAA+B,oBAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,KAAvB,KAAoC,MAApC,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,OAASC,cAAT,KAA+B,mBAA/B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,IAAP,KAAiB,0BAAjB,CACA,OAASC,UAAT,KAA2B,UAA3B,C,6IACA,GAAMC,CAAAA,MAAM,CAAG,CACbC,OAAO,CAAE,CACPC,MAAM,CAAE,MADD,CAEPC,OAAO,CAAE,QAFF,CAGPC,OAAO,CAAE,MAHF,CAIPC,cAAc,CAAE,QAJT,CAKPC,UAAU,CAAE,QALL,CAMPC,KAAK,CAAE,aANA,CAOPC,YAAY,CAAE,MAPP,CAQPC,eAAe,CAAE,oBARV,CASPC,MAAM,CAAE,SATD,CADI,CAYbC,IAAI,CAAE,CACJC,KAAK,CAAE,SADH,CAZO,CAebC,SAAS,CAAE,CACTP,UAAU,CAAE,QADH,CAETF,OAAO,CAAE,MAFA,CAGTU,aAAa,CAAE,QAHN,CAITZ,MAAM,CAAE,MAJC,CAKTG,cAAc,CAAE,QALP,CAMTU,UAAU,CAAE,MANH,CAOTC,WAAW,CAAE,MAPJ,CAQTb,OAAO,CAAE,UARA,CASTO,MAAM,CAAE,SATC,CAfE,CA0BbO,IAAI,CAAE,CACJC,SAAS,CAAE,QADP,CAEJC,IAAI,CAAE,iBAFF,CAGJC,UAAU,CAAE,GAHR,CAIJC,YAAY,CAAE,KAJV,CAKJnB,MAAM,CAAE,MALJ,CA1BO,CAAf,CAmCA,QAASoB,CAAAA,OAAT,EAAmB,CACjB,gBACElC,UAAU,EADZ,CAAQmC,YAAR,aAAQA,YAAR,CAAsBC,eAAtB,aAAsBA,eAAtB,CAAuCvB,OAAvC,aAAuCA,OAAvC,CAAgDwB,OAAhD,aAAgDA,OAAhD,CAAyDC,MAAzD,aAAyDA,MAAzD,CAEA,cAA4ChC,QAAQ,CAAC,KAAD,CAApD,wCAAOiC,cAAP,eAAuBC,iBAAvB,eACA,eAAoDlC,QAAQ,CAAC,KAAD,CAA5D,yCAAOmC,kBAAP,eAA2BC,qBAA3B,eAEA,GAAI,CAACN,eAAD,EAAoB,CAACvB,OAAzB,CAAkC,CAChC,mBACE,wCACE,YAAK,OAAO,CAAE,yBAAM6B,CAAAA,qBAAqB,CAAC,IAAD,CAA3B,EAAd,uBACE,UAAG,KAAK,CAAE9B,MAAM,CAACW,IAAjB,0BADF,EADF,cAIE,MAAC,KAAD,EACE,OAAO,CAAEkB,kBADX,CAEE,MAAM,CAAE,IAFV,CAGE,QAAQ,CAAE,0BAAMC,CAAAA,qBAAqB,CAAC,KAAD,CAA3B,EAHZ,CAIE,SAAS,CAAE,CACT3B,OAAO,CAAE,MADA,CAET4B,QAAQ,CAAE,MAFD,CAGTC,UAAU,CAAE,KAHH,CAJb,CASE,KAAK,CAAE,CAAED,QAAQ,CAAE,MAAZ,CAAoBC,UAAU,CAAE,KAAhC,CATT,CAUE,KAAK,CAAC,OAVR,wBAYE,YACE,KAAK,CAAE,CACL7B,OAAO,CAAE,MADJ,CAELC,OAAO,CAAE,MAFJ,CAGLC,cAAc,CAAE,QAHX,CAIL2B,UAAU,CAAE,KAJP,CAKLD,QAAQ,CAAE,MALL,CADT,4BAZF,cAuBE,YAAK,KAAK,CAAE,CAAE3B,OAAO,CAAE,MAAX,CAAmB6B,mBAAmB,CAAE,SAAxC,CAAZ,UACGlC,UAAU,CAACmC,GAAX,CAAe,cAA+BC,GAA/B,KAAGC,CAAAA,KAAH,MAAGA,KAAH,CAAUnB,IAAV,MAAUA,IAAV,CAAgBoB,WAAhB,MAAgBA,WAAhB,oBACd,aACE,KAAK,CAAErC,MAAM,CAACa,SADhB,CAGE,OAAO,sEAAE,yKAECU,CAAAA,YAAY,CAAC,CAAEe,QAAQ,CAAED,WAAZ,CAAD,CAFb,QAGLE,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAA2CJ,WAA3C,EACAP,qBAAqB,CAAC,KAAD,CAArB,CAJK,+EAMLY,OAAO,CAACC,KAAR,cANK,oEAAF,EAHT,wBAaE,YAAK,GAAG,CAAE1B,IAAV,CAAgB,GAAG,CAAEmB,KAArB,CAA4B,KAAK,CAAEpC,MAAM,CAACiB,IAA1C,EAbF,cAcE,KAAC,IAAD,EAAM,KAAK,CAAE,CAAEc,QAAQ,CAAE,MAAZ,CAAb,UAAoCK,KAApC,EAdF,GAEOD,GAFP,CADc,EAAf,CADH,EAvBF,GAJF,GADF,CAmDD,CAED,mBACE,wCAiBE,aAAK,KAAK,CAAEnC,MAAM,CAACC,OAAnB,CAA4B,OAAO,CAAE,yBAAM2B,CAAAA,iBAAiB,CAAC,IAAD,CAAvB,EAArC,wBACE,UAAG,KAAK,gBAAIZ,WAAW,CAAE,KAAjB,EAA2BhB,MAAM,CAACW,IAAlC,CAAR,UACGtB,cAAc,CAACY,OAAD,CAAU,CAAV,CADjB,EADF,cAIE,KAAC,OAAD,EAAS,aAAa,KAAtB,CAAuB,KAAK,CAAE,CAA9B,EAJF,GAjBF,cAuBE,MAAC,KAAD,EACE,OAAO,CAAE0B,cADX,CAEE,MAAM,CAAE,IAFV,CAGE,QAAQ,CAAE,0BAAMC,CAAAA,iBAAiB,CAAC,KAAD,CAAvB,EAHZ,CAIE,SAAS,CAAE,CACTzB,OAAO,CAAE,MADA,CAET4B,QAAQ,CAAE,MAFD,CAGTC,UAAU,CAAE,KAHH,CAJb,CASE,KAAK,CAAE,CAAED,QAAQ,CAAE,MAAZ,CAAoBC,UAAU,CAAE,KAAhC,CATT,CAUE,KAAK,CAAC,OAVR,kCAaE,MAAC,IAAD,EACE,KAAK,CAAE,CACLY,SAAS,CAAE,MADN,CAELpC,YAAY,CAAE,MAFT,CADT,CAKE,SAAS,CAAE,CAAEL,OAAO,CAAE,MAAX,CALb,wBAOE,KAAC,OAAD,EACE,MAAM,CAAC,MADT,CAEE,IAAI,CAAE,CAFR,CAGE,QAAQ,KAHV,CAIE,KAAK,CAAE,CAAE4B,QAAQ,CAAE,MAAZ,CAJT,EAPF,cAaE,YAAK,KAAK,CAAE,CAAEa,SAAS,CAAE,MAAb,CAAqBzC,OAAO,CAAE,QAA9B,CAAZ,uBACE,WACE,IAAI,WAAKN,WAAW,CAAC4B,OAAD,CAAhB,qBAAqCxB,OAArC,CADN,CAEE,MAAM,CAAC,QAFT,CAGE,GAAG,CAAC,YAHN,wBAKE,KAAC,cAAD,EAAgB,KAAK,CAAE,CAAEe,WAAW,CAAE,KAAf,CAAvB,EALF,sBADF,EAbF,GAbF,cAqCE,KAAC,MAAD,EACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,SAFP,CAGE,KAAK,CAAE,CACLT,KAAK,CAAE,MADF,CAELqC,SAAS,CAAE,MAFN,CAGLpC,YAAY,CAAE,QAHT,CAILuB,QAAQ,CAAE,MAJL,CAKLC,UAAU,CAAE,KALP,CAHT,CAUE,OAAO,sEAAE,+JACDN,CAAAA,MAAM,EADL,QAEPa,MAAM,CAACC,YAAP,CAAoBK,UAApB,CAA+B,aAA/B,EACAjB,iBAAiB,CAAC,KAAD,CAAjB,CAHO,wDAAF,EAVT,+BArCF,GAvBF,GADF,CAkFD,CAED,cAAeN,CAAAA,OAAf","sourcesContent":["import { useMoralis } from \"react-moralis\";\r\nimport { getEllipsisTxt } from \"helpers/formatters\";\r\nimport Blockie from \"../Blockie\";\r\nimport { Button, Card, Modal } from \"antd\";\r\nimport { useState } from \"react\";\r\nimport Address from \"../Address/Address\";\r\nimport { SelectOutlined } from \"@ant-design/icons\";\r\nimport { getExplorer } from \"helpers/networks\";\r\nimport Text from \"antd/lib/typography/Text\";\r\nimport { connectors } from \"./config\";\r\nconst styles = {\r\n  account: {\r\n    height: \"42px\",\r\n    padding: \"0 15px\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"fit-content\",\r\n    borderRadius: \"12px\",\r\n    backgroundColor: \"rgb(244, 244, 244)\",\r\n    cursor: \"pointer\",\r\n  },\r\n  text: {\r\n    color: \"#21BF96\",\r\n  },\r\n  connector: {\r\n    alignItems: \"center\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    height: \"auto\",\r\n    justifyContent: \"center\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    padding: \"20px 5px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  icon: {\r\n    alignSelf: \"center\",\r\n    fill: \"rgb(40, 13, 95)\",\r\n    flexShrink: \"0\",\r\n    marginBottom: \"8px\",\r\n    height: \"30px\",\r\n  },\r\n};\r\n\r\nfunction Account() {\r\n  const { authenticate, isAuthenticated, account, chainId, logout } =\r\n    useMoralis();\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [isAuthModalVisible, setIsAuthModalVisible] = useState(false);\r\n\r\n  if (!isAuthenticated || !account) {\r\n    return (\r\n      <>\r\n        <div onClick={() => setIsAuthModalVisible(true)}>\r\n          <p style={styles.text}>Authenticate</p>\r\n        </div>\r\n        <Modal\r\n          visible={isAuthModalVisible}\r\n          footer={null}\r\n          onCancel={() => setIsAuthModalVisible(false)}\r\n          bodyStyle={{\r\n            padding: \"15px\",\r\n            fontSize: \"17px\",\r\n            fontWeight: \"500\",\r\n          }}\r\n          style={{ fontSize: \"16px\", fontWeight: \"500\" }}\r\n          width=\"340px\"\r\n        >\r\n          <div\r\n            style={{\r\n              padding: \"10px\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              fontWeight: \"700\",\r\n              fontSize: \"20px\",\r\n            }}\r\n          >\r\n            Connect Wallet\r\n          </div>\r\n          <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\" }}>\r\n            {connectors.map(({ title, icon, connectorId }, key) => (\r\n              <div\r\n                style={styles.connector}\r\n                key={key}\r\n                onClick={async () => {\r\n                  try {\r\n                    await authenticate({ provider: connectorId });\r\n                    window.localStorage.setItem(\"connectorId\", connectorId);\r\n                    setIsAuthModalVisible(false);\r\n                  } catch (e) {\r\n                    console.error(e);\r\n                  }\r\n                }}\r\n              >\r\n                <img src={icon} alt={title} style={styles.icon} />\r\n                <Text style={{ fontSize: \"14px\" }}>{title}</Text>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* <button\r\n        onClick={async () => {\r\n          try {\r\n            console.log(\"change\")\r\n            await web3._provider.request({\r\n              method: \"wallet_switchEthereumChain\",\r\n              params: [{ chainId: \"0x38\" }],\r\n            });\r\n            console.log(\"changed\")\r\n          } catch (e) {\r\n            console.error(e);\r\n          }\r\n        }}\r\n      >\r\n        Hi\r\n      </button> */}\r\n      <div style={styles.account} onClick={() => setIsModalVisible(true)}>\r\n        <p style={{ marginRight: \"5px\", ...styles.text }}>\r\n          {getEllipsisTxt(account, 6)}\r\n        </p>\r\n        <Blockie currentWallet scale={3} />\r\n      </div>\r\n      <Modal\r\n        visible={isModalVisible}\r\n        footer={null}\r\n        onCancel={() => setIsModalVisible(false)}\r\n        bodyStyle={{\r\n          padding: \"15px\",\r\n          fontSize: \"17px\",\r\n          fontWeight: \"500\",\r\n        }}\r\n        style={{ fontSize: \"16px\", fontWeight: \"500\" }}\r\n        width=\"400px\"\r\n      >\r\n        Account\r\n        <Card\r\n          style={{\r\n            marginTop: \"10px\",\r\n            borderRadius: \"1rem\",\r\n          }}\r\n          bodyStyle={{ padding: \"15px\" }}\r\n        >\r\n          <Address\r\n            avatar=\"left\"\r\n            size={6}\r\n            copyable\r\n            style={{ fontSize: \"20px\" }}\r\n          />\r\n          <div style={{ marginTop: \"10px\", padding: \"0 10px\" }}>\r\n            <a\r\n              href={`${getExplorer(chainId)}/address/${account}`}\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n            >\r\n              <SelectOutlined style={{ marginRight: \"5px\" }} />\r\n              View on Explorer\r\n            </a>\r\n          </div>\r\n        </Card>\r\n        <Button\r\n          size=\"large\"\r\n          type=\"primary\"\r\n          style={{\r\n            width: \"100%\",\r\n            marginTop: \"10px\",\r\n            borderRadius: \"0.5rem\",\r\n            fontSize: \"16px\",\r\n            fontWeight: \"500\",\r\n          }}\r\n          onClick={async () => {\r\n            await logout();\r\n            window.localStorage.removeItem(\"connectorId\");\r\n            setIsModalVisible(false);\r\n          }}\r\n        >\r\n          Disconnect Wallet\r\n        </Button>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Account;\r\n"]},"metadata":{},"sourceType":"module"}