{"ast":null,"code":"\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = exports.WalletConnectEvent = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _freeze = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/freeze\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _verifyChainId = _interopRequireDefault(require(\"../utils/verifyChainId\"));\n\nvar _AbstractWeb3Connector = _interopRequireDefault(require(\"./AbstractWeb3Connector\"));\n\nvar _events = require(\"./events\");\n\nvar _MoralisRpcs = require(\"./MoralisRpcs\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar WalletConnectEvent = (0, _freeze.default)({\n  ACCOUNTS_CHANGED: 'accountsChanged',\n  CHAIN_CHANGED: 'chainChanged',\n  DISCONNECT: 'disconnect'\n});\n/**\n * Connector to connect an WalletConenct provider to Moralis\n * Note: this assumes using WalletConnect v1\n * // TODO: support WalletConnect v2\n */\n\nexports.WalletConnectEvent = WalletConnectEvent;\n\nvar WalletConnectWeb3Connector = /*#__PURE__*/function (_AbstractWeb3Connecto) {\n  (0, _inherits2.default)(WalletConnectWeb3Connector, _AbstractWeb3Connecto);\n\n  var _super = _createSuper(WalletConnectWeb3Connector);\n\n  function WalletConnectWeb3Connector() {\n    var _context;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, WalletConnectWeb3Connector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, (0, _concat.default)(_context = [this]).call(_context, args));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"type\", 'WalletConnect');\n    return _this;\n  }\n\n  (0, _createClass2.default)(WalletConnectWeb3Connector, [{\n    key: \"activate\",\n    value: function () {\n      var _activate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var _ref,\n            providedChainId,\n            mobileLinks,\n            WalletConnectProvider,\n            config,\n            _require,\n            _window,\n            _window$WalletConnect,\n            accounts,\n            account,\n            chainId,\n            verifiedChainId,\n            _args = arguments;\n\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, providedChainId = _ref.chainId, mobileLinks = _ref.mobileLinks;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return this.deactivate();\n\n              case 4:\n                _context2.next = 8;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](1);\n\n              case 8:\n                if (this.provider) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                config = {\n                  rpc: (0, _MoralisRpcs.getMoralisRpcs)('WalletConnect'),\n                  chainId: providedChainId,\n                  qrcodeModalOptions: {\n                    mobileLinks: mobileLinks\n                  }\n                };\n\n                try {\n                  WalletConnectProvider = (_require = require('@walletconnect/web3-provider')) === null || _require === void 0 ? void 0 : _require.default;\n                } catch (error) {// Do nothing. User might not need walletconnect\n                }\n\n                if (!WalletConnectProvider) {\n                  WalletConnectProvider = (_window = window) === null || _window === void 0 ? void 0 : (_window$WalletConnect = _window.WalletConnectProvider) === null || _window$WalletConnect === void 0 ? void 0 : _window$WalletConnect.default;\n                }\n\n                if (WalletConnectProvider) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                throw new Error('Cannot enable via WalletConnect: dependency \"@walletconnect/web3-provider\" is missing');\n\n              case 14:\n                if (typeof WalletConnectProvider === 'function') {\n                  this.provider = new WalletConnectProvider(config);\n                } else {\n                  this.provider = new window.WalletConnectProvider(config);\n                }\n\n              case 15:\n                if (this.provider) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                throw new Error('Could not connect via WalletConnect, error in connecting to provider');\n\n              case 17:\n                _context2.next = 19;\n                return this.provider.enable();\n\n              case 19:\n                accounts = _context2.sent;\n                account = accounts[0].toLowerCase();\n                chainId = this.provider.chainId;\n                verifiedChainId = (0, _verifyChainId.default)(chainId);\n                this.account = account;\n                this.chainId = verifiedChainId;\n                this.subscribeToEvents(this.provider);\n                return _context2.abrupt(\"return\", {\n                  provider: this.provider,\n                  account: account,\n                  chainId: verifiedChainId\n                });\n\n              case 27:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee, this, [[1, 6]]);\n      }));\n\n      return function () {\n        return _activate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"deactivate\",\n    value: function () {\n      var _deactivate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.unsubscribeToEvents(this.provider);\n\n                try {\n                  if (window) {\n                    window.localStorage.removeItem('walletconnect');\n                  }\n                } catch (error) {// Do nothing\n                }\n\n                this.account = null;\n                this.chainId = null;\n\n                if (!this.provider) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                _context3.prev = 5;\n                _context3.next = 8;\n                return this.provider.disconnect();\n\n              case 8:\n                _context3.next = 12;\n                break;\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](5);\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2, this, [[5, 10]]);\n      }));\n\n      return function () {\n        return _deactivate.apply(this, arguments);\n      };\n    }()\n  }]);\n  return WalletConnectWeb3Connector;\n}(_AbstractWeb3Connector.default);\n\nvar _default = WalletConnectWeb3Connector;\nexports.default = _default;","map":{"version":3,"sources":["C:/webgis/newfold/ethereum-boilerplate/node_modules/moralis/lib/browser/Web3Connector/WalletConnectWeb3Connector.js"],"names":["_Reflect$construct","require","_Object$defineProperty","_interopRequireDefault","exports","value","default","WalletConnectEvent","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_freeze","_concat","_verifyChainId","_AbstractWeb3Connector","_events","_MoralisRpcs","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","result","NewTarget","constructor","arguments","apply","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","ACCOUNTS_CHANGED","CHAIN_CHANGED","DISCONNECT","WalletConnectWeb3Connector","_AbstractWeb3Connecto","_super","_context","_this","_len","length","args","Array","_key","key","_activate","mark","_callee","_ref","providedChainId","mobileLinks","WalletConnectProvider","config","_require","_window","_window$WalletConnect","accounts","account","chainId","verifiedChainId","_args","wrap","_context2","prev","next","undefined","deactivate","t0","provider","rpc","getMoralisRpcs","qrcodeModalOptions","error","window","Error","enable","sent","toLowerCase","subscribeToEvents","abrupt","stop","_deactivate","_callee2","_context3","unsubscribeToEvents","localStorage","removeItem","disconnect","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = exports.WalletConnectEvent = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _freeze = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/freeze\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _verifyChainId = _interopRequireDefault(require(\"../utils/verifyChainId\"));\n\nvar _AbstractWeb3Connector = _interopRequireDefault(require(\"./AbstractWeb3Connector\"));\n\nvar _events = require(\"./events\");\n\nvar _MoralisRpcs = require(\"./MoralisRpcs\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar WalletConnectEvent = (0, _freeze.default)({\n  ACCOUNTS_CHANGED: 'accountsChanged',\n  CHAIN_CHANGED: 'chainChanged',\n  DISCONNECT: 'disconnect'\n});\n/**\n * Connector to connect an WalletConenct provider to Moralis\n * Note: this assumes using WalletConnect v1\n * // TODO: support WalletConnect v2\n */\n\nexports.WalletConnectEvent = WalletConnectEvent;\n\nvar WalletConnectWeb3Connector = /*#__PURE__*/function (_AbstractWeb3Connecto) {\n  (0, _inherits2.default)(WalletConnectWeb3Connector, _AbstractWeb3Connecto);\n\n  var _super = _createSuper(WalletConnectWeb3Connector);\n\n  function WalletConnectWeb3Connector() {\n    var _context;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, WalletConnectWeb3Connector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, (0, _concat.default)(_context = [this]).call(_context, args));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"type\", 'WalletConnect');\n    return _this;\n  }\n\n  (0, _createClass2.default)(WalletConnectWeb3Connector, [{\n    key: \"activate\",\n    value: function () {\n      var _activate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var _ref,\n            providedChainId,\n            mobileLinks,\n            WalletConnectProvider,\n            config,\n            _require,\n            _window,\n            _window$WalletConnect,\n            accounts,\n            account,\n            chainId,\n            verifiedChainId,\n            _args = arguments;\n\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, providedChainId = _ref.chainId, mobileLinks = _ref.mobileLinks;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return this.deactivate();\n\n              case 4:\n                _context2.next = 8;\n                break;\n\n              case 6:\n                _context2.prev = 6;\n                _context2.t0 = _context2[\"catch\"](1);\n\n              case 8:\n                if (this.provider) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                config = {\n                  rpc: (0, _MoralisRpcs.getMoralisRpcs)('WalletConnect'),\n                  chainId: providedChainId,\n                  qrcodeModalOptions: {\n                    mobileLinks: mobileLinks\n                  }\n                };\n\n                try {\n                  WalletConnectProvider = (_require = require('@walletconnect/web3-provider')) === null || _require === void 0 ? void 0 : _require.default;\n                } catch (error) {// Do nothing. User might not need walletconnect\n                }\n\n                if (!WalletConnectProvider) {\n                  WalletConnectProvider = (_window = window) === null || _window === void 0 ? void 0 : (_window$WalletConnect = _window.WalletConnectProvider) === null || _window$WalletConnect === void 0 ? void 0 : _window$WalletConnect.default;\n                }\n\n                if (WalletConnectProvider) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                throw new Error('Cannot enable via WalletConnect: dependency \"@walletconnect/web3-provider\" is missing');\n\n              case 14:\n                if (typeof WalletConnectProvider === 'function') {\n                  this.provider = new WalletConnectProvider(config);\n                } else {\n                  this.provider = new window.WalletConnectProvider(config);\n                }\n\n              case 15:\n                if (this.provider) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                throw new Error('Could not connect via WalletConnect, error in connecting to provider');\n\n              case 17:\n                _context2.next = 19;\n                return this.provider.enable();\n\n              case 19:\n                accounts = _context2.sent;\n                account = accounts[0].toLowerCase();\n                chainId = this.provider.chainId;\n                verifiedChainId = (0, _verifyChainId.default)(chainId);\n                this.account = account;\n                this.chainId = verifiedChainId;\n                this.subscribeToEvents(this.provider);\n                return _context2.abrupt(\"return\", {\n                  provider: this.provider,\n                  account: account,\n                  chainId: verifiedChainId\n                });\n\n              case 27:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee, this, [[1, 6]]);\n      }));\n\n      return function () {\n        return _activate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"deactivate\",\n    value: function () {\n      var _deactivate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.unsubscribeToEvents(this.provider);\n\n                try {\n                  if (window) {\n                    window.localStorage.removeItem('walletconnect');\n                  }\n                } catch (error) {// Do nothing\n                }\n\n                this.account = null;\n                this.chainId = null;\n\n                if (!this.provider) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                _context3.prev = 5;\n                _context3.next = 8;\n                return this.provider.disconnect();\n\n              case 8:\n                _context3.next = 12;\n                break;\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](5);\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2, this, [[5, 10]]);\n      }));\n\n      return function () {\n        return _deactivate.apply(this, arguments);\n      };\n    }()\n  }]);\n  return WalletConnectWeb3Connector;\n}(_AbstractWeb3Connector.default);\n\nvar _default = WalletConnectWeb3Connector;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}